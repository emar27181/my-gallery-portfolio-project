---
import { images } from '../data/image';
---

<div class="mb-8">
  <!-- ðŸ” æ¤œç´¢UIï¼ˆæ©Ÿèƒ½ã¯æœªå®Ÿè£…ï¼‰ -->
  <input
    type="text"
    placeholder="Search..."
    class="mb-4 w-full rounded-md border px-4 py-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
  />

  <!-- ðŸ·ï¸ ã‚¿ã‚°UIï¼ˆæ©Ÿèƒ½ã¯æœªå®Ÿè£…ï¼‰ -->
  <div class="mb-4 flex flex-wrap gap-2">
    <button class="rounded-full bg-gray-200 px-3 py-1 text-sm hover:bg-gray-300 transition-colors duration-200">#illust</button>
    <button class="rounded-full bg-gray-200 px-3 py-1 text-sm hover:bg-gray-300 transition-colors duration-200">#manga</button>
    <button class="rounded-full bg-gray-200 px-3 py-1 text-sm hover:bg-gray-300 transition-colors duration-200">#game</button>
    <button class="rounded-full bg-gray-200 px-3 py-1 text-sm hover:bg-gray-300 transition-colors duration-200">#photo</button>
    <button class="rounded-full bg-gray-200 px-3 py-1 text-sm hover:bg-gray-300 transition-colors duration-200">#study</button>
    <button class="rounded-full bg-gray-200 px-3 py-1 text-sm hover:bg-gray-300 transition-colors duration-200">#logo</button>
    <button class="rounded-full bg-gray-200 px-3 py-1 text-sm hover:bg-gray-300 transition-colors duration-200">#ai</button>
    <button class="rounded-full bg-gray-200 px-3 py-1 text-sm hover:bg-gray-300 transition-colors duration-200">#research</button>
  </div>

  <!-- ðŸ–¼ ã‚®ãƒ£ãƒ©ãƒªãƒ¼ -->
  <div id="gallery" class="xl:-mx-48">
    <div class="masonry-container">
      {
        images.map(({ src, alt, title, tags }) => (
          <div class="masonry-item mb-4 break-inside-avoid">
            <img
              src={src}
              alt={alt}
              title={title}
              class="block h-auto w-full rounded-lg cursor-pointer hover:opacity-90 transition-opacity duration-200 shadow-md"
              loading="lazy"
              data-src={src}
              data-alt={alt}
              data-title={title}
            />
            <div class="mt-2 p-2">
              <h3 class="text-sm font-semibold text-gray-800">{title}</h3>
              <div class="mt-1 flex flex-wrap gap-1">
                {tags.map((tag) => (
                  <span class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">
                    #{tag}
                  </span>
                ))}
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</div>

<style>
  .masonry-container {
    column-count: 4;
    column-gap: 1rem;
  }
  
  @media (max-width: 1024px) {
    .masonry-container {
      column-count: 3;
    }
  }
  
  @media (max-width: 768px) {
    .masonry-container {
      column-count: 2;
    }
  }
  
  @media (max-width: 640px) {
    .masonry-container {
      column-count: 2;
    }
  }
  
  .masonry-item {
    display: inline-block;
    width: 100%;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const galleryImages = document.querySelectorAll('#gallery img');
    galleryImages.forEach((img) => {
      img.addEventListener('click', () => {
        const src = img.getAttribute('data-src') || img.getAttribute('src');
        const alt = img.getAttribute('data-alt') || img.getAttribute('alt');
        if (src && (window as any).openImageModal) {
          (window as any).openImageModal(src, alt);
        } else {
          console.log('Image clicked:', src, alt);
        }
      });
    });
  });
</script>